"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createPgPool = void 0;
const pg_1 = require("pg");
const knex_1 = require("./knex");
/**
 * Attempts to connect to the database by the connection string.
 *
 * This returns a pg pool connection object.
 */
const createPgPool = (connectionString) => {
    const { connection } = (0, knex_1.getConnectionData)(connectionString);
    const config = {
        ...connection,
        connectionTimeoutMillis: 30000 // 30 seconds
    };
    return new pg_1.Pool(config);
};
exports.createPgPool = createPgPool;
